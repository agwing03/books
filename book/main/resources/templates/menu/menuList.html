<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout/basic">
    <th:block layout:fragment="title">
        <title>리스트 페이지</title>
    </th:block>
    <th:block layout:fragment="content">
    <form id="searchVO" name="searchVO" method="post" >
    	<div class="search_field">
         <div class="search_field_loc">
             <h5><strong>메뉴목록 관리</strong></h5>
             <ul class="buttons">
                 <li><a href="#" onclick="fn_search();return false;"><img src="/images/tapCmm/search.svg"><p>조회</p></a></li>
                 <li><a th:href="@{/admin/menu/menuView.do}"><img src="/images/tapCmm/save.svg"><p>등록</p></a></li>
                 <li><a href="#" onclick="fn_search();return false;"><img src="/images/tapCmm/trash.svg"><p>삭제</p></a></li>
             </ul>
         </div>
         <div class="modify_user" >
        
	            <table>
	            	<colgroup>
                       <col width="10%">
                       <col width="10%">
                   </colgroup>
                   <tbody>
	  				<tr>
	  					<th>메뉴명</th>
	  					<td>
	                     	<input  id="keyword" name="keyword" onkeypress="if( event.keyCode == 13 ){fn_search();}" style="width:200px;" th:value="${params.keyword}"/>
	  					</td>
	  				</tr>
			        </tbody>
			       </table>
			</div>
        <div class="default_tablestyle">
            <table>
                <thead>
                    <tr>
                    	<th scope="col" class="f_field" nowrap="nowrap"><input type="checkbox" id="allCheck" onchange="fn_allCheck(this);"></td>
                        <th>메뉴번호</th>
                        <th>메뉴명</th>
                        <th>프로그램파일명</th>
                        <th>메뉴설명</th>
                        <th>상위메뉴번호</th>
                        <th>사용여부</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${not #lists.isEmpty( response.list )}" th:each="row, status : ${response.list}" 
                    	th:with="num=${response.pagination.totalRecordCount - (params.page -1) * params.recordSize}">
					    <td><input type="checkbox" name="checkBox" th:value="${row.menuId}"></td>
                        <td th:text="${row.menuId}"></td>
                        <td th:text="${row.menuNm}"></td>
                        <td th:text="${row.programFileNm}"></td>
                        <td th:text="${row.menuDesc}"></td>
                        <td th:text="${row.upperMenuId}"></td>
                        <td th:text="${row.useYn}"></td>
                    </tr>
                    <tr th:unless="${not #lists.isEmpty( response.list )}">
                        <td colspan="5">검색된 결과가 없습니다.</td>
                    </tr>
                </tbody>
            </table>
        </div>
        </div>
		</form>
           <!--  <div class="btn_wrap text-right">
                <a th:href="@{/board/write.do}" class="btn btn-primary waves-effect waves-light">등록</a>
            </div> -->

           <th:block layout:fragment="paging">	
            <div class="pagination mt0">
                    <ul class="pagination">
                   	    <a class="prev end" th:onclick="movePage(1);"></a>
                       	<a class="prev" th:onclick="|movePage('${response.pagination.startPage}');|"></a>
                    	<th:block th:each="i : ${#numbers.sequence(response.pagination.startPage,response.pagination.endPage)}">
                    		<a th:classappend="${i} == ${searchVO.page} ? 'on'"  href="javascript:void(0)" th:onclick="|movePage('${i}');|" th:text="${i}"></a>
                    	</th:block>
                       	<a class="next" th:onclick="|movePage('${response.pagination.endPage + 1}');|"></a>
                       	<a class="next end" th:onclick="|movePage('${response.pagination.totalPageCount}');|"></a>
                    </ul>
               </div>
            </th:block>
    </th:block>
    
     <th:block layout:fragment="script">
        <script th:inline="javascript">
        /*<![CDATA[*/
	        $(document).ready(function() {
	        });
	   /*]]>*/ 
        
        /*<![CDATA[*/
            // 페이지 이동
            function movePage(page) {
                const queryParams = {
                    page: (page) ? page : 1,
                    recordSize: 10,
                    pageSize: 10
                }
                location.href = location.pathname + '?' + new URLSearchParams(queryParams).toString();
            }

        /*]]>*/
        
        // 전체 선택
            function fn_allCheck(){
            	const checkboxes = document.getElementsByName("checkBox");
             
                if (document.getElementById("allCheck").checked) {
                    checkboxes.forEach((checkbox) => {
                        checkbox.checked = true;
                    })
                } else {
                    checkboxes.forEach((checkbox) => {
                        checkbox.checked = false;
                	})
                }
        	}
        
       //검색
       function fn_search(){
        		$("#searchVO").action = '/admin/menu/menuList.do';
        		$("#searchVO").submit();
        	}
        </script>
     </th:block>
        
</html>