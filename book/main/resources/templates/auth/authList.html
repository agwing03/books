<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout/basic">
    <th:block layout:fragment="title">
        <title>리스트 페이지</title>
    </th:block>

    <th:block layout:fragment="content">
    <form id="searchVO" name="searchVO" method="post">
    	<div class="search_field">
		    <div class="search_field_loc">
		    	<h5><strong>권한 관리</strong></h5>
		    	<ul class="buttons">
		    		<li><a onclick="fn_insert();" ><img src="/images/tapCmm/save.svg"><p>등록</p></a></li>
		    	</ul>
		    </div>
	    </div>
        <div class="modify_user">
        	<table>
            	<colgroup>
                      <col width="10%">
                      <col width="10%">
                </colgroup>
                <tbody>
  					<tr>
	  					<th>조회조건</th>
	  					<td>
	  						<select id="srchGbn" name="srchGbn" title="검색구분">
	  							<option value="">선택</option>
	  							<option value="invoiceNumber">권한 ID</option>
	  							<option value="orderId">권한명</option>
	  						</select>
	  					</td>
	  					<td>
	                     	<input  id="srchText" name="srchText" onkeypress="if( event.keyCode == 13 ){fn_select_search();}" style="width:200px;"/>
	  					</td>
  					</tr>
		        </tbody>
		    </table>
        </div>

        <div class="default_tablestyle">
            <table>
            	<colgroup>
            		<col width="30%">
            		<col width="30%">
            		<col width="40%">
            	</colgroup>
                <thead>
                    <tr>
                    	<th>순번</th>
                        <th>권한ID</th>
                        <th>권한명</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${not #lists.isEmpty( response.list )}" th:each="row, status : ${response.list}" 
                    	th:with="num=${response.pagination.totalRecordCount - (params.page -1) * params.recordSize}">
                        <td th:text="${num - status.index}"></td>
                        <td ><a th:href="@{/auth/view.do( authId=${row.authId} )}" th:text="${row.authId}"></a></td>
                        <td th:text="${row.authNm}"></td>
                    </tr>
                    <tr th:unless="${not #lists.isEmpty( response.list )}">
                        <td colspan="5">검색된 결과가 없습니다.</td>
                    </tr>
                </tbody>
            </table>
		</div>
	</form>
            
        <th:block layout:fragment="paging">
       		<div class="pagination mt0">
	            <nav aria-label="Page navigation" class="text-center">
	            	<ul class="pagination">
	                	<th:block th:if="${response.pagination.existPrevPage}"> 
	                 		<li><a href="javascript:void(0)" th:onclick="movePage(1);" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
	                   		<li><a href="javascript:void(0)" th:onclick="|movePage('${response.pagination.startPage - 1}');|" aria-label="Previous"><span aria-hidden="true">&lsaquo;</span></a></li>
	                 	</th:block>
	                 	
	                 	<th:block th:each="i : ${#numbers.sequence(response.pagination.startPage,response.pagination.endPage)}">
	                 		<li><a href="javascript:void(0)" th:onclick="|movePage('${i}');|" th:text="${i}"></a></li>
	                 	</th:block>
	                     
	                     <th:block th:if="${response.pagination.existNextPage}"> 
	                     	<li th:if="${response.pagination.existNextPage}"><a href="javascript:void(0)" th:onclick="|movePage('${response.pagination.endPage + 1}');|" aria-label="Next"><span aria-hidden="true">&rsaquo;</span></a></li>
	                     	<li th:if="${response.pagination.existNextPage}"><a href="javascript:void(0)" th:onclick="|movePage('${response.pagination.totalPageCount}');|" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
	                 	</th:block>
	                 </ul>
	             </nav>
	         </div>
        </th:block>
    </th:block>
    
     <th:block layout:fragment="script">
        <script th:inline="javascript">
        /*<![CDATA[*/
            // 페이지 이동
            function movePage(page) {
                const queryParams = {
                    page: (page) ? page : 1,
                    recordSize: 10,
                    pageSize: 10
                }
                location.href = location.pathname + '?' + new URLSearchParams(queryParams).toString();
            }

        	// 권한등록 페이지 이동
        	function fn_insert() {
        		$("#searchVO").attr("action", "/auth/write.do");
        		$("#searchVO").submit();
        	}
        /*]]>*/
        </script>
     </th:block>
        
</html>